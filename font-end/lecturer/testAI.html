<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>G·ª£i √Ω T√†i li·ªáu AI</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 30px;
            max-width: 600px;
            margin: auto;
        }
        input, textarea, button {
            width: 100%;
            margin-top: 10px;
            padding: 10px;
            font-size: 16px;
        }
        .suggestion {
            background-color: #f1f1f1;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h2>üß† G·ª£i √Ω T√†i li·ªáu b·∫±ng AI (Hugging Face)</h2>

    <label for="projectId">M√£ ƒë·ªì √°n:</label>
    <input type="text" id="projectId" placeholder="VD: DA01" required>

    <label for="keywords">T·ª´ kh√≥a:</label>
    <textarea id="keywords" placeholder="VD: machine learning, classification..." required></textarea>

    <button onclick="generateSuggestions()">T·∫°o G·ª£i √ù</button>

    <div id="result"></div>

    <script>
        async function generateSuggestions() {
            const projectId = document.getElementById("projectId").value.trim();
            const keywords = document.getElementById("keywords").value.trim();
            const resultDiv = document.getElementById("result");
            resultDiv.innerHTML = "‚è≥ ƒêang x·ª≠ l√Ω...";

            try {
                const response = await fetch("https://localhost:7047/api/LecturerResources/suggestions", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                        // N·∫øu d√πng cookie JWT th√¨ kh√¥ng c·∫ßn Authorization header
                        // N·∫øu c·∫ßn: "Authorization": "Bearer <your_token_here>"
                    },
                    credentials: "include", // ƒê·ªÉ g·ª≠i cookie (JWT)
                    body: JSON.stringify({ projectId, keywords })
                });

                if (!response.ok) {
                    const error = await response.json();
                    resultDiv.innerHTML = `<p style="color: red;">‚ùå L·ªói: ${error.message || response.statusText}</p>`;
                    return;
                }

                const suggestions = await response.json();
                if (suggestions.length === 0) {
                    resultDiv.innerHTML = "ü§î Kh√¥ng c√≥ g·ª£i √Ω n√†o.";
                    return;
                }

                resultDiv.innerHTML = "<h3>K·∫øt qu·∫£ g·ª£i √Ω:</h3>";
                suggestions.forEach(s => {
                    resultDiv.innerHTML += `
                        <div class="suggestion">
                            <strong>D·ª± √°n:</strong> ${s.projectId}<br/>
                            <strong>G·ª£i √Ω:</strong> ${s.content}
                        </div>
                    `;
                });

            } catch (error) {
                resultDiv.innerHTML = `<p style="color: red;">‚ùå L·ªói k·∫øt n·ªëi: ${error.message}</p>`;
            }
        }
    </script>
</body>
</html>
