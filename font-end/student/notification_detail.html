<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Chi ti·∫øt th√¥ng b√°o c·ªßa h·ªá th·ªëng Sinh vi√™n HUTECH.">
    <meta name="copyright" content="¬© 2025 - Nh√≥m TAD Programmer Khoa C√¥ng ngh·ªá Th√¥ng tin - Tr∆∞·ªùng ƒê·∫°i h·ªçc C√¥ng ngh·ªá TP.HCM - HUTECH. T·∫•t c·∫£ quy·ªÅn ƒë∆∞·ª£c b·∫£o l∆∞u.">
    <title>Chi ti·∫øt th√¥ng b√°o | H·ªá th·ªëng Sinh vi√™n</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="styles.css" rel="stylesheet">
    <link rel="icon" href="img/img_logohutech.png" type="image/png">
</head>
<body>
    <!-- Sidebar -->
    <div class="sidebar" id="sidebar">
        <h4 class="text-center mb-4">üéì H·ªá th·ªëng Sinh vi√™n</h4>
        <a href="student_dashboard.html"><i class="bi bi-house-door"></i> Trang ch·ªß</a>
        <a href="student_submissions_list.html"><i class="bi bi-upload"></i> N·ªôp b√†i t·∫≠p ƒë·ªì √°n</a>
        <a href="student_tracking_list.html"><i class="bi bi-bar-chart-line"></i> Theo d√µi ti·∫øn ƒë·ªô ƒë·ªì √°n</a>
        <a href="student_history_submissions_list.html"><i class="bi bi-clock-history"></i> Xem l·ªãch s·ª≠ n·ªôp b√†i</a>
        <a href="student_proposals_list.html"><i class="bi bi-lightbulb"></i> ƒê·ªÅ xu·∫•t ƒë·ªÅ t√†i ƒë·ªì √°n</a>
        <a href="student_schedule.html"><i class="bi bi-calendar"></i> L·ªãch c√° nh√¢n</a>
        <a href="student_grades_list.html"><i class="bi bi-award"></i> H·ªá th·ªëng ch·∫•m ƒëi·ªÉm</a>
    </div>

    <!-- Main Content -->
    <div class="content">
        <!-- Navbar -->
        <nav class="navbar navbar-expand-lg px-3">
            <button id="toggleSidebarBtn" class="btn btn-outline-light me-2">
                <i id="sidebarIcon" class="bi bi-list"></i>
            </button>            
            <div class="ms-auto d-flex align-items-center">
                <input type="text" class="search-box me-3" placeholder="üîç T√¨m ki·∫øm...">
                <button id="toggleFullscreen" class="btn"><i class="bi bi-arrows-fullscreen"></i></button>
                <button id="toggleTheme" class="btn"><i class="bi bi-moon"></i></button>
                <button id="notificationBtn" class="btn position-relative">
                    <i class="bi bi-bell"></i>
                    <span class="badge bg-danger position-absolute top-0 start-100 translate-middle" id="unreadCount">0</span>
                </button>
                <button id="profileBtn" class="btn"><i class="bi bi-person-circle"></i></button>
            </div>
        </nav>

        <!-- Profile Dropdown -->
        <div class="profile-dropdown" id="profileDropdown">
            <div class="profile-header">
                <img src="img/avatar.jpg" alt="User Avatar">
                <h6>Nguy·ªÖn Tri B√£o Th·∫Øng</h6>
                <p>nguyentribaothang@gmail.com</p>
            </div>
            <div class="profile-menu">
                <a href="#"><i class="bi bi-gear"></i> C√†i ƒë·∫∑t hi·ªÉn th·ªã</a>
                <a href="#" id="toggleFullscreenBtn"><i class="bi bi-arrows-fullscreen"></i> To√†n m√†n h√¨nh</a>
                <a href="#"><i class="bi bi-arrow-clockwise"></i> Kh√¥i ph·ª•c m·∫∑c ƒë·ªãnh</a>
                <a href="../LOGIN/login.html" class="logout"><i class="bi bi-box-arrow-right"></i> ƒêƒÉng xu·∫•t</a>
            </div>
        </div>

        <div class="container mt-4">
            <!-- Breadcrumb -->
            <nav class="breadcrumb-container">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="student_dashboard.html"><i class="bi bi-house-door"></i></a>
                    </li>
                    <li class="breadcrumb-item">
                        <a href="notifications_list.html"><i class="bi bi-bell-fill"></i></a>
                    </li>
                    <li class="breadcrumb-item active">
                        <i class="bi bi-file-earmark-text"></i> Chi ti·∫øt
                    </li>
                </ol>
            </nav>

            <div class="notifications-container">
                <div class="notifications-header">
                    <i class="bi bi-person-circle"></i>
                    <span id="notificationsTitle"></span>
                    <div class="ms-auto d-flex gap-2">
                        <i class="bi bi-trash text-danger" style="cursor: pointer;" onclick="deleteNotification()"></i>
                        <i class="bi bi-share text-primary" style="cursor: pointer;" onclick="shareNotification()"></i>
                    </div>
                </div>
                <p id="notificationsTime" class="notifications-meta"></p>
                <p id="notificationsAuthor" class="notifications-meta"></p>
                <div id="notificationsContent" class="notifications-content"></div>
                <div class="text-center mt-4">
                    <button id="markAsReadBtn" class="btn btn-success me-2" onclick="markAsRead()">ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc</button>
                    <a href="notifications_list.html" class="back-btn"><i class="bi bi-arrow-left"></i> Quay l·∫°i danh s√°ch</a>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        B·∫£n quy·ªÅn c·ªßa HUTECH ‚Äì Ph√°t tri·ªÉn b·ªüi Team TAD Programmer ¬©2025
    </div>

    <script>
        // D·ªØ li·ªáu m·∫´u th√¥ng b√°o
        const notifications = {
            "1": {
                title: "Gia h·∫°n th·ªùi gian n·ªôp ƒë∆°n c√°c th·ªß t·ª•c h·ªçc v·ª• H·ªçc k·ª≥ 2 (2024 - 2025)",
                time: "üïí 09:05 - 07/12/2024",
                author: "@Cao Thanh Th√∫y",
                content: "Do t√¨nh h√¨nh d·ªãch b·ªánh, nh√† tr∆∞·ªùng quy·∫øt ƒë·ªãnh gia h·∫°n th·ªùi gian n·ªôp ƒë∆°n c√°c th·ªß t·ª•c h·ªçc v·ª• H·ªçc k·ª≥ 2 (2024 - 2025) ƒë·∫øn ng√†y **20/12/2024**. Sinh vi√™n vui l√≤ng chu·∫©n b·ªã ƒë·∫ßy ƒë·ªß gi·∫•y t·ªù c·∫ßn thi·∫øt.\n\nL∆∞u √Ω: Sau th·ªùi gian n√†y, c√°c ƒë∆°n n·ªôp mu·ªôn s·∫Ω kh√¥ng ƒë∆∞·ª£c ch·∫•p nh·∫≠n.",
                status: "unread"
            },
            "2": {
                title: "Th√¥ng b√°o v·ªÅ vi·ªác th·ª±c hi·ªán c√°c th·ªß t·ª•c h·ªçc v·ª• - H·ªçc k·ª≥ 2 nƒÉm h·ªçc 2024 - 2025",
                time: "üïí 09:22 - 13/11/2024",
                author: "@B√πi H·ªìng ·∫®n",
                content: "Sinh vi√™n c·∫ßn ho√†n t·∫•t c√°c th·ªß t·ª•c h·ªçc v·ª• tr∆∞·ªõc ng√†y **30/11/2024** ƒë·ªÉ tr√°nh b·ªã gi√°n ƒëo·∫°n h·ªçc t·∫≠p. C√°c th·ªß t·ª•c bao g·ªìm:\n- N·ªôp ƒë∆°n xin ngh·ªâ h·ªçc t·∫°m th·ªùi (n·∫øu c√≥).\n- ƒêƒÉng k√Ω t√≠n ch·ªâ b·ªï sung.",
                status: "unread"
            },
            "3": {
                title: "Gi√°n ƒëo·∫°n truy c·∫≠p ƒë·ªÉ b·∫£o tr√¨ n√¢ng c·∫•p h·ªá th·ªëng h·ªçc v·ª• ƒëi·ªán t·ª≠",
                time: "üïí 08:44 - 28/10/2024",
                author: "@Ph·∫°m ƒê√¨nh Ph√πng",
                content: "H·ªá th·ªëng h·ªçc v·ª• ƒëi·ªán t·ª≠ s·∫Ω b·∫£o tr√¨ t·ª´ ng√†y **01/11** ƒë·∫øn ng√†y **03/11**. Sinh vi√™n vui l√≤ng s·∫Øp x·∫øp c√¥ng vi·ªác n·ªôp ƒë∆°n tr∆∞·ªõc th·ªùi gian n√†y.\n\nN·∫øu c√≥ th·∫Øc m·∫Øc, li√™n h·ªá ph√≤ng ƒê√†o t·∫°o qua email: daotao@hutech.edu.vn.",
                status: "unread"
            }
        };

        // Navbar Functions
        document.getElementById("toggleSidebarBtn").addEventListener("click", () => {
            const sidebar = document.querySelector(".sidebar");
            const content = document.querySelector(".content");
            const icon = document.getElementById("sidebarIcon");
            sidebar.classList.toggle("collapsed");
            content.classList.toggle("expanded");
            icon.classList.toggle("bi-list");
            icon.classList.toggle("bi-layout-sidebar-inset");
        });

        document.getElementById("notificationBtn").addEventListener("click", () => {
            window.location.href = "notifications_list.html";
        });

        document.getElementById("profileBtn").addEventListener("click", (event) => {
            event.stopPropagation();
            const dropdown = document.getElementById("profileDropdown");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        });

        document.addEventListener("click", (event) => {
            const dropdown = document.getElementById("profileDropdown");
            if (!dropdown.contains(event.target) && event.target.id !== "profileBtn") {
                dropdown.style.display = "none";
            }
        });

        document.getElementById("toggleFullscreen").addEventListener("click", () => {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        });

        document.getElementById("toggleFullscreenBtn").addEventListener("click", () => {
            if (!document.fullscreenElement) document.documentElement.requestFullscreen();
            else document.exitFullscreen();
        });

        document.getElementById("toggleTheme").addEventListener("click", () => {
            document.body.classList.toggle("dark-mode");
            localStorage.setItem("theme", document.body.classList.contains("dark-mode") ? "dark" : "light");
        });

        if (localStorage.getItem("theme") === "dark") document.body.classList.add("dark-mode");

        // L·∫•y th√¥ng tin th√¥ng b√°o t·ª´ URL
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        function loadNotification() {
            if (notifications[id]) {
                const notif = notifications[id];
                document.getElementById("notificationsTitle").textContent = notif.title;
                document.getElementById("notificationsTime").textContent = notif.time;
                document.getElementById("notificationsAuthor").textContent = notif.author;
                document.getElementById("notificationsContent").innerHTML = formatContent(notif.content);
                document.getElementById("markAsReadBtn").style.display = notif.status === "unread" ? "inline-block" : "none";
                updateUnreadCount();
            } else {
                document.getElementById("notificationsTitle").textContent = "Kh√¥ng t√¨m th·∫•y th√¥ng b√°o";
                document.getElementById("notificationsContent").textContent = "Th√¥ng b√°o v·ªõi ID n√†y kh√¥ng t·ªìn t·∫°i.";
                document.getElementById("markAsReadBtn").style.display = "none";
            }
        }

        // ƒê·ªãnh d·∫°ng n·ªôi dung th√¥ng b√°o (h·ªó tr·ª£ xu·ªëng d√≤ng v√† in ƒë·∫≠m)
        function formatContent(content) {
            return content.replace(/\n/g, '<br>').replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
        }

        // ƒê√°nh d·∫•u ƒë√£ ƒë·ªçc
        function markAsRead() {
            if (notifications[id]) {
                notifications[id].status = "read";
                document.getElementById("markAsReadBtn").style.display = "none";
                updateUnreadCount();
            }
        }

        // X√≥a th√¥ng b√°o
        function deleteNotification() {
            if (confirm("B·∫°n c√≥ ch·∫Øc mu·ªën x√≥a th√¥ng b√°o n√†y kh√¥ng?")) {
                delete notifications[id];
                window.location.href = "notifications_list.html";
            }
        }

        // Chia s·∫ª th√¥ng b√°o
        function shareNotification() {
            const notif = notifications[id];
            if (notif) {
                const shareText = `${notif.title}\n${notif.time}\n${notif.author}\n${notif.content}`;
                if (navigator.share) {
                    navigator.share({
                        title: notif.title,
                        text: shareText,
                        url: window.location.href
                    }).catch(err => alert("Kh√¥ng th·ªÉ chia s·∫ª: " + err));
                } else {
                    navigator.clipboard.writeText(shareText).then(() => alert("ƒê√£ sao ch√©p th√¥ng b√°o v√†o clipboard!"));
                }
            }
        }

        // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng th√¥ng b√°o ch∆∞a ƒë·ªçc
        function updateUnreadCount() {
            const unreadCount = Object.values(notifications).filter(n => n.status === "unread").length;
            document.getElementById("unreadCount").textContent = unreadCount;
        }

        // Kh·ªüi ch·∫°y
        loadNotification();
    </script>
</body>
</html>